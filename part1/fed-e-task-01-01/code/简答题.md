## 简答题

#### 谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？
#
**谈谈你是如何理解 JS 异步编程的**
- 答：JS在设计时是作为浏览器的脚本语言，并且是单线程的。因为在用户互动的场景，如果用户多次操作删除或增加同一个DOM节点，多线程就会带来很复杂的同步问题。
单线程就意味着所有代码或任务需要排队执行。在处理一些延迟高的任务时，比如ajax操作，就必须等待结果返回才能往下执行。所以才有了异步编程的需求，以便解决代码执行阻塞的问题。

**EventLoop、消息队列都是做什么的**
- 答：EventLoop就是同步任务与异步任务的执行机制，叫做事件循环机制，同步任务是当前函数调用栈里的函数，主线程会依次调用执行，如果产生了新的执行上下文，则将该执行任务压入栈顶，并执行该任务。
- 如果遇到了异步任务，当异步任务是宏任务时将该宏任务的回调添加到一个单独的任务队列（我理解为叫做宏任务队列）。
- 当异步任务是微任务时，添加到微任务队列。
- 当函数调用栈为空时，主线程会去微任务队列依次读取事件执行（先入先出），直到微任务队列为空，然后再检查宏任务队列是否有任务，如果有则取一个宏任务进入函数调用栈执行。
- 重复以上步骤直到宏任务队列和微任务队列都为空。

**什么是宏任务，什么是微任务？**
- 答：
- 宏任务（macrotasks or task）: setTimeout, setInterval, setImmediate, requestAnimationFrame, I/O, UI rendering
- 微任务（microtasks）: process.nextTick, Promises, queueMicrotask, MutationObserver